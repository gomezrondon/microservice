group 'group1'
version '1.0-SNAPSHOT'


task buildAll(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew :config-server:build :reactive-service:build :ms-stock:build :eureka-register:build :eureka-service:build :micro-proxy:build -x test'
}

task copyAllDockerFiles(type:Exec) {
    dependsOn buildAll
    commandLine 'cmd', '/c', 'gradlew :config-server:copyDockerFile :reactive-service:copyDockerFile :ms-stock:copyDockerFile :eureka-register:copyDockerFile :eureka-service:copyDockerFile :micro-proxy:copyDockerFile'
}

task cleanAll(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew :config-server:clean :reactive-service:clean :ms-stock:clean :eureka-register:clean :eureka-service:clean :micro-proxy:clean'
}

task runAll(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew :config-server:bootRun -Dprofile=sandbox :db-service:bootRun'
}

task config(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew :config-server:bootRun'
}

task eureka(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew -Dprofile=sandbox :eureka-register:bootRun'
}

task stockService(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew -Dprofile=sandbox :eureka-service:bootRun'
}

task proxyService(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew -Dprofile=sandbox :micro-proxy:bootRun'
}

task reactiveService(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew -Dprofile=sandbox :reactive-service:bootRun'
}

task msStock(type:Exec) {
    commandLine 'cmd', '/c', 'gradlew -Dprofile=sandbox :ms-stock:bootRun'
}

// example of how to run in localhost by setting profile=sandbox
//gradlew -Dprofile=sandbox :db-service:bootRun


task wrapper(type: Wrapper) {
    gradleVersion = '4.2'
}